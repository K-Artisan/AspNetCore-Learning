# IAuthorizationPolicyProvider Sample
===================================
 - 源码地址：https://github.com/dotnet/AspNetCore/tree/release/3.1/src/Security/samples/CustomPolicyProvider

This small sample demonstrates how to use `IAuthorizationPolicyProvider` to 
dynamically produce authorization policies.

(使用`IAuthorizationPolicyProvider` 动态生成认证策略)

In the simple example, a `MinimumAgePolicyProvider` will produce minimum age 
policies for any integer age (based on the policy's 
name). This demonstrates a slightly round-about way to allow 'parameterized' 
authorization policies. Since authorization policies are identified by 
name strings, the custom `MinimumAgeAuthorizeAttribute` in the sample 
allows users to specify an age parameter and then embeds it into its 
underlying `AuthorizationAttribute`'s policy name string. The 
`MinimumAgePolicyProvider` dynamically generates the policies needed for use 
with these attributes by pulling the age from the policy name and creating 
necessary authorization requirements.

Other uses of `IAuthorizationPolicyProvider` might be loading policy 
information from some external data source (like a database, for example).

Notice that ASP.NET Core only uses one authorization policy provider, so 
if not all policies will be generated by the custom policy provider, it 
should fall back to other policy providers (like `DefaultAuthorizationPolicyProvider`).

To use the sample:

1. Run the app
2. Navigate to http://localhost:11606/
3. Attempt to follow one of the 'Minimum Age' links
4. Sign in by providing a user name and birth date
5. Notice that depending on the birth date entered, pages guarded by minimum age authorization policies will either be accessible or forbidden

The interesting classes for this sample are in the Authorization folder, 
particularly `MinimumAgePolicyProvider`.

# 授权

 - 认证：
 认证旨在确定用户的真实身份。


 - 授权
 授权是通过权限控制使用户只能做其允许做的事情，
 授权的本质就是通过一个策略决定授权是通过权限控制使用户只能做其允许做的事情，究竟具有声明特性的用户会被授权访问某个资源或者执行某个操作。

 我可以使用任何授权策略，如，
 - 可以根据用户的拥有的角色进行授权，
 - 也可以根据用户的等级，所在的部门进行授权，
 - 有的可以根据用户的年龄、性别、和所在国家来进行授权

      认证后的用户体现为一个`ClaimsPrincipal`对象.它携带的声明不仅仅用于描述用户的身份，还携带了上述构建授权策略的元素， 
 所以授权实际上就是检查认证用户携带的声明是否与授权策略一致的过程，
